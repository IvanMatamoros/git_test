<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reflex Math — Endless Mode</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 2rem; }
    .wrap { max-width: 560px; margin: auto; }
    h1 { margin-top: 0; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
    .big { font-size: 2.5rem; margin: 8px 0 12px; }
    .row { display: flex; gap: 8px; align-items: center; }
    input { font-size: 1.25rem; padding: .5rem .75rem; border-radius: 8px; border: 1px solid #bbb; width: 160px; }
    button { font-size: 1.1rem; padding: .5rem .9rem; border-radius: 8px; border: 1px solid #999; background: white; cursor: pointer; }
    .meta { display: flex; gap: 16px; margin-top: 6px; color: #444;}
    .pill { border: 1px solid #bbb; padding: 4px 10px; border-radius: 999px; }
    .small { font-size: .95rem; color: #555; }
    .ok { color: green; }
    .bad { color: #b00020; }
    footer { margin-top: 2rem; color: #666; }
    .muted { color: #777; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Reflex Math — Endless Mode</h1>
    <p class="small">Unlimited time. Your <strong>streak resets</strong> when you miss. Press Enter to submit.</p>
    <div class="card">
      <div class="meta">
        <div class="pill">Score: <span id="score">0</span></div>
        <div class="pill">Streak: <span id="streak">0</span></div>
        <div class="pill">Best Streak: <span id="best">0</span></div>
        <div class="pill">Answered: <span id="answered">0</span></div>
      </div>
      <div class="big"><span id="a"></span> <span id="op"></span> <span id="b"></span> = ?</div>
      <div class="row">
        <input id="ans" type="text" autocomplete="off" placeholder="Your answer">
        <button id="submit">Submit</button>
        <button id="reset">Reset</button>
      </div>
      <div id="feedback" class="small muted"></div>
    </div>
    <footer>
      <p class="small muted">Tip: tweak ranges/ops in the code to customize difficulty.</p>
    </footer>
  </div>

<script>
let score = 0, streak = 0, best = 0, answered = 0;
const scoreEl = document.getElementById('score');
const streakEl = document.getElementById('streak');
const bestEl = document.getElementById('best');
const ansEl = document.getElementById('ans');
const feedback = document.getElementById('feedback');
const submit = document.getElementById('submit');
const resetBtn = document.getElementById('reset');
const aEl = document.getElementById('a');
const bEl = document.getElementById('b');
const opEl = document.getElementById('op');
let correctAns = 0;

function rand(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function newQuestion() {
  const ops = ['+','-','×','÷'];
  const op = ops[rand(0, ops.length-1)];
  let a, b;
  if (op === '+') {
    a = rand(12, 99); b = rand(12, 99); correctAns = a + b;
  } else if (op === '-') {
    a = rand(20, 120); b = rand(12, 99); if (b > a) [a,b] = [b,a]; correctAns = a - b;
  } else if (op === '×') {
    a = rand(6, 14); b = rand(6, 14); correctAns = a * b;
  } else {
    b = rand(2, 12); correctAns = rand(2, 12); a = b * correctAns;
  }
  aEl.textContent = a; bEl.textContent = b; opEl.textContent = op;
  ansEl.value = ''; ansEl.focus();
}

function submitAns() {
  const val = ansEl.value.trim();
  if (val === '') return;
  const user = Number(val);
  answered++; 
  if (Number.isFinite(user) && Math.abs(user - correctAns) < 1e-9) {
    score++; streak++; 
    if (streak > best) best = streak;
    scoreEl.textContent = score; streakEl.textContent = streak; bestEl.textContent = best;
    feedback.innerHTML = `<span class="ok">✓ Correct!</span>`;
  } else {
    streak = 0; 
    streakEl.textContent = streak;
    feedback.innerHTML = `<span class="bad">✗ Wrong. Answer: ${correctAns}. Streak reset.</span>`;
  }
  document.getElementById('answered').textContent = answered;
  newQuestion();
}

function resetAll() {
  score = 0; streak = 0; best = 0; answered = 0;
  scoreEl.textContent = score; streakEl.textContent = streak; bestEl.textContent = best;
  document.getElementById('answered').textContent = answered;
  feedback.textContent = 'Reset!';
  newQuestion();
}

submit.addEventListener('click', submitAns);
ansEl.addEventListener('keydown', (e) => { if (e.key === 'Enter') submitAns(); });
resetBtn.addEventListener('click', resetAll);

// start immediately
newQuestion();
</script>
</body>
</html>